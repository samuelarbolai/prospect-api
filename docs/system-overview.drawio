<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36" version="28.2.8" pages="2">
  <diagram id="dataModel" name="Data Model">
    <mxGraphModel dx="1627" dy="1065" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="2" value="&lt;b&gt;Prospect&lt;/b&gt;&lt;br/&gt;- id (doc id)&lt;br/&gt;- name, organization, role_title&lt;br/&gt;- priority_bucket, priority_reason&lt;br/&gt;- list_ids[]&lt;br/&gt;- enrichment { status, queue_run_id, queue_timestamp, updated_at }&lt;br/&gt;- outreach { ready, ready_at }&lt;br/&gt;- emails[], social.linkedin" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="30" y="60" width="290" height="240" as="geometry" />
        </mxCell>
        <mxCell id="3" value="&lt;b&gt;EnrichmentRun&lt;/b&gt;&lt;br/&gt;- id (doc id)&lt;br/&gt;- status (queued, running, etc.)&lt;br/&gt;- prospect_count&lt;br/&gt;- list_tag&lt;br/&gt;- metadata&lt;br/&gt;- created_at" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="360" y="60" width="260" height="180" as="geometry" />
        </mxCell>
        <mxCell id="4" value="&lt;b&gt;Lists&lt;/b&gt;&lt;br/&gt;- list_id&lt;br/&gt;- derived from prospect.list_ids&lt;br/&gt;- used for workspace segmentation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="360" y="260" width="260" height="120" as="geometry" />
        </mxCell>
        <mxCell id="5" value="&lt;b&gt;Relationships&lt;/b&gt;&lt;br/&gt;Prospect.list_ids ⟶ many-to-many logical grouping&lt;br/&gt;Prospect.enrichment.queue_run_id ⟶ EnrichmentRun.id" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="650" y="70" width="260" height="160" as="geometry" />
        </mxCell>
        <mxCell id="6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#6c8ebf;" parent="1" source="2" target="3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#6c8ebf;" parent="1" source="2" target="4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=open;endFill=1;strokeColor=#82b366;" parent="1" source="3" target="5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=open;endFill=1;strokeColor=#82b366;" parent="1" source="4" target="5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="apiFlow" name="API Flow">
    <mxGraphModel dx="895" dy="586" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="10" parent="0" />
        <mxCell id="11" value="Browser UI" style="swimlane;horizontal=0;startSize=30;rounded=1;strokeColor=#6c8ebf;fillColor=#dae8fc;fontSize=12;" parent="10" vertex="1">
          <mxGeometry x="20" y="40" width="140" height="720" as="geometry" />
        </mxCell>
        <mxCell id="15" value="Select filters &amp; click refresh" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#6c8ebf;" parent="11" vertex="1">
          <mxGeometry x="20" y="90" width="110" height="60" as="geometry" />
        </mxCell>
        <mxCell id="12" value="Prospect Frontend (Vercel)" style="swimlane;horizontal=0;startSize=30;rounded=1;strokeColor=#9673a6;fillColor=#e1d5e7;fontSize=12;" parent="10" vertex="1">
          <mxGeometry x="180" y="40" width="180" height="720" as="geometry" />
        </mxCell>
        <mxCell id="16" value="Apply filters, call GET /api/prospects" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#9673a6;" parent="12" vertex="1">
          <mxGeometry x="20" y="160" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="21" value="Render table with updated prospects" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#9673a6;" parent="12" vertex="1">
          <mxGeometry x="20" y="270" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="22" value="Optional: Queue enrichment (POST /api/enqueue_enrichment)" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#9673a6;" parent="12" vertex="1">
          <mxGeometry x="20" y="380" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="25" value="Optionally mark outreach ready" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#9673a6;" parent="12" vertex="1">
          <mxGeometry x="20" y="500" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="13" value="Prospect API (Cloud Run)" style="swimlane;horizontal=0;startSize=30;rounded=1;strokeColor=#d79b00;fillColor=#ffe6cc;fontSize=12;" parent="10" vertex="1">
          <mxGeometry x="380" y="40" width="220" height="720" as="geometry">
            <mxRectangle x="380" y="40" width="40" height="170" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="17" value="Validate query, fetch prospects" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#d79b00;" parent="13" vertex="1">
          <mxGeometry x="30" y="160" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="20" value="JSON response to frontend" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#d79b00;" parent="13" vertex="1">
          <mxGeometry x="30" y="270" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="23" value="Create run doc, batch update prospects" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#d79b00;" parent="13" vertex="1">
          <mxGeometry x="30" y="380" width="160" height="90" as="geometry" />
        </mxCell>
        <mxCell id="26" value="Update outreach fields" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#d79b00;" parent="13" vertex="1">
          <mxGeometry x="30" y="500" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="14" value="Firestore" style="swimlane;horizontal=0;startSize=30;rounded=1;strokeColor=#82b366;fillColor=#d5e8d4;fontSize=12;" parent="10" vertex="1">
          <mxGeometry x="620" y="40" width="170" height="720" as="geometry" />
        </mxCell>
        <mxCell id="18" value="Query collection with filters (list_ids, etc.)" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#82b366;" parent="14" vertex="1">
          <mxGeometry x="20" y="160" width="130" height="90" as="geometry" />
        </mxCell>
        <mxCell id="19" value="Return filtered data to API" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#82b366;" parent="14" vertex="1">
          <mxGeometry x="20" y="270" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="24" value="Write enrichment_run + prospect updates" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#82b366;" parent="14" vertex="1">
          <mxGeometry x="20" y="380" width="130" height="80" as="geometry" />
        </mxCell>
        <mxCell id="27" value="Persist outreach state" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#82b366;" parent="14" vertex="1">
          <mxGeometry x="20" y="500" width="130" height="70" as="geometry" />
        </mxCell>
        <mxCell id="28" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#6c8ebf;" parent="10" source="15" target="16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#9673a6;" parent="10" source="16" target="17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#d79b00;" parent="10" source="17" target="18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="31" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#82b366;" parent="10" source="18" target="19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#d79b00;" parent="10" source="19" target="20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#9673a6;" parent="10" source="20" target="21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#9673a6;" parent="10" source="21" target="22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="35" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#d79b00;" parent="10" source="22" target="23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#82b366;" parent="10" source="23" target="24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="37" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#9673a6;" parent="10" source="24" target="22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="320" y="460" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#d79b00;" parent="10" source="25" target="26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="39" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#82b366;" parent="10" source="26" target="27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="40" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jettySize=auto;orthogonalLoop=1;html=1;endArrow=block;endFill=1;strokeColor=#9673a6;" parent="10" source="27" target="25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="280" y="590" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
